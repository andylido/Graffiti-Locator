<!DOCTYPE html>
<html>
    
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='manifest' href='./manifest.json'>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<style>
		.content {
			display: none;
			margin: 1em;
		}
	</style> 
    <title>Graffiti Locater by AL</title>
  </head>
    
    
  <body>

    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
		<a class="nav-link" href="#about" style="background-image: AL.png;">
            AL
        </a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#search">Search <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#list">List</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#map">Map</a>
                </li>
            </ul>
        </div>
    </nav>
    
      
    <!-- Content Display For Each Page -->
    <div class="content" id="search">
        <!-- User Inputs -->
        <h2 class="section-heading text-uppercase">Please Input Ward and Status</h2><br>
        <div class="col-md-12">
            <div class="col-md-6">
                Ward:
                <input class="form-control" type="number" id="ward" placeholder="i.e. 1234" required="required"/><br>
            </div>
            <div class="col-md-6">
                Status:
                <br>
                 <select id=status>
                    <option value="Open">Open</option>
                    <option value="Completed">Completed</option>
                </select> 
            </div>
            <br>
            <div class="col-lg-12">
                <button id="search" class="btn btn-primary btn-xl text-uppercase" style="border-color: white">Search</button>
            </div>
        </div>
    </div>
    
    <div class="content" id="about">
        <h1>About</h1><br>
        <h2>Graffiti Locator by AL</h2><br>
        
        <p>Welcome to Graffiti Locator, this intuitive application allows users to search by ward and status of graffitis to help removers locate the position of the art that needs to be taken down via google maps.</p> 
        <p>The Search tab will take you to the page where you will input the information.</p> 
        <p>Then, the list tab will take you to the page where it will list all street address, service request number,  graffati location, type of surface, date created, status and completion date (if applicable).</p> 
        <p>Finally, the map tab will take you to the page where google maps will visually show you where all the graffatis are located with marker pinpoint for further detail.</p>
    </div>
      
    <div class="content" id="list">
        <div class="template" style="width: 18rem;">
		  <div class="card-body">
			<h5 class="requestNum">Card title</h5>
			<h6 class="address mb-2 text-muted">Card subtitle</h6>
			<p class="where">Card Content</p>
            <p class="surface">Card Content</p>
            <p class="dateCreated">Card Content</p>
            <p class="status">Card Content</p>
            <p class="completionDate">Not Completed</p>
			<a href="#" class="card-link">Card link</a>
			<a href="#" class="card-link">Another link</a>
		  </div>
        </div>
    </div>
      
    <div class="content container-fluid" id="map" style="height: 500px; width: 500px">
    </div>
    
      
      
    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    

    <!-- Document Ready --> 
    <script>
      // street address
      // service request number
      // where the graffiti is located
      // what type of surface
      // date created
      // status
      // completion date (if applicable)
        
      $(document).ready(function() {
        
        $("#search").show();  
          
        var endpoint = "https://data.cityofchicago.org/resource/cdmx-wzbz.json?$limit=5";
          
        $('#search').click(function() {
            //$("#list").empty(); // clear the display
            var searchWard = $("#ward").val();
            var searchStatus = $("#status").val();
            //console.log(searchString);
            //console.log(searchStatus);
            var url = endpoint + "&status=" + searchStatus + "&ward=" + searchWard;
            //console.log(url);
            
            $.get(url, function(response) {
                //console.log(response);
                //$("#cards").append("<h2>Your query returned " + response.length + " records.</h2>");
                var data = response;
                $.each(data, function(i,v){
                    console.log(i,v);
                    // clone card
                    var clone = $(".template").clone();
                    // update values
                    clone.find(".requestNum").text(v.service_request_number);
                    //clone.find(".card-title").addClass(v.results);
                    //clone.find(".card-title").attr("data-results", v.results);
                    clone.find(".address").text(v.street_address);
                    clone.find(".where").text(v.where_is_the_graffiti_located_);
                    clone.find(".surface").text(v.what_type_of_surface_is_the_graffiti_on_);
                    clone.find(".dateCreated").text(v.creation_date);
                    clone.find(".status").text("Status: ", v.status);
                    clone.find(".completionDate").text("Date completed: ", v.completion_date);
                    
                    clone.removeClass(".template")
                    // insert into DOM
                    $("#list").append(clone);
                });
            });
        });
          
        function hideScreens() {
          $(".content").hide();
        }
          
        $(".nav-link").on("click", function(){
          hideScreens();
          var target = $(this).attr("href");
          $(target).show();
        });
        
      });
    </script>
      
    <!-- Service Worker -->  
    <script>
        // register the service worker for offline use
        //if('serviceWorker' in navigator) {
        //  navigator.serviceWorker
        //           .register('./sw.js')
        //           .then(function() { console.log("Service Worker Registered"); });
        //}
    </script>
    
    <!-- Google Map and Markers --> 
    <script>
        // Initialize and add the map
        function initMap() {
            // The location of Uluru
            var uluru = {lat: 41.8781, lng: -87.6298};
            // The map, centered at Uluru
            var map = new google.maps.Map(
            document.getElementById('map'), {zoom: 13, center: uluru});
            // The marker, positioned at Uluru
            //$.get("https://data.cityofchicago.org/resource/cdmx-wzbz.json?$limit=5", function(response))
            //marker.addListener('click', function() {
            //    infowindow.open(map, marker);
            //});
        }
        
        //function createMarkers (data) {
        //    $.each(data, function(i,v) {
        //        infowindow.open(map,marker);
        //        var infowindow = new google.maps.InfoWindow({
        //            content: "Chicago"
        //        });
        //        marker.addListener('click', function() {
        //            infowindow.open(map, marker);
        //        });
        //    });
        //}
    </script>

    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCHtlXJLYGtdVwxVeVRE_qwY6ADIBOTpvY&callback=initMap">
    </script>  
      
  </body>
</html>
